{% extends 'base.html' %}

{% block htmlbody %}
<style>
      .design{
     color: white;
        background-color:#329DD6 !important;
    }
      .design1{
     color: white;
        background-color:#329DD6 !important;
    }
</style>

<!-- page content -->
            <div class="right_col" role="main">
               <div class="row" style="display: block;">
                        <div class="col-md-12 col-sm-12 ">

          <div class="page-title">
            <div class="title_left">
              <h3 style="font-size:20px; font-weight:600;">Zonal Dashboard</h3>
            </div>
          </div>
                             <div class="x_panel">
        {% if request.session.role == 'Admin' %}
				      	<form  method="POST" action=""   enctype="multipart/form-data">
											{% csrf_token %}
									<div  class="col-md-3 col-sm-3  form-group has-feedback">
													<label> Warehouse</label>

										 <select class="form-control" name="warehouseid2" id="warehouseid2" hidden>
                            		                    <option value="{{ request.POST.warehouseid }}">{{ request.POST.warehousename }}</option>
												</select>
											 <input type="hidden" name="warehousename" id="warehousename" />

												<select class="form-control" name="warehouseid" id="warehouseid">
													<option value="All">All</option>
													{% for data1 in wh_masterlist %}
														{% if data1.status == 'Active' %}
                            		                    	<option value="{{ data1.warehouseid }}">{{ data1.warehousename }}</option>
														{% endif %}
													{% endfor %}
												</select>
										</div>
                            </form>
                             </div>
                        </div>

        {% endif %}
                     <div class="col-md-12 col-sm-12 ">
                   <div class="x_panel">
          <div class="page-title">
            <div class="title_left">
              <h3 style="font-size:20px; font-weight:600;">Zonal Stores Stock Available</h3>
            </div>
            <div class="title_right">
              <div class="col-md-8 col-sm-8 offset-md-9">
                <label><input type="checkbox" id="checked1" class="js-switch"  /></label>
              </div>
            </div>
          </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="animated flipInY col-lg-2 col-md-2 col-sm-7 ">
                                <div class="tile-stats">
                                    <div class="count zonalcases" style="color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Cases)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span>Available Stock</p>
                                </div>
                            </div>
                            <div class="animated flipInY col-lg-3 col-md-3 col-sm-7 ">
                                <div class="tile-stats">
                                    <div class="count zonalbott" style="color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Bottles)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span>Availble Stock</p>
                                </div>
                            </div>
                            <div class="animated flipInY col-lg-2 col-md-2 col-sm-7 ">
                                <div class="tile-stats" >
                                    <div class="count avgcases" style="color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Cases)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span>Avg Consumption of last 7 days</p>
                                </div>
                            </div>
                            <div class="animated flipInY col-lg-3 col-md-3 col-sm-7">
                                <div class="tile-stats">
                                    <div class="count avgbott" style="color: #3493fb;color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Bottles)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span> Avg Consumption of last 7 days</p>
                                </div>
                            </div>
                            <div class="animated flipInY col-lg-2 col-md-2 col-sm-">
                                <div class="tile-stats">
                                    <div class="count zonaldays" style="color: #3493fb;color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Days</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span>Stock Available</p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                   <div class="row">
                        <div class="col-md-4 col-sm-4" style="overflow:hidden;">
                        <div class="x_panel Consumption">
                                    <div id="graph_bar_group1" style="width:100%; height:280px;"></div>
                                      <h5 class="text-info" style="margin:20px">Qty Available vs Qty Consumption progress</h5>
                                </div>
                        </div>
            <div class="col-md-3 col-sm-3" >
                        <div class="x_panel days">
                            <div class="sidebar-widget" style="margin-bottom:40px;">
                                <h4></h4>
                                <canvas id="chart_gauge_03" class="" style="margin-bottom:50px;width:350px;height:200px;margin-left:-10px;margin-top:10px"></canvas>
                                <div class="goal-wrapper">
                                    <span id="gauge-text2" class="gauge-value pull-left" style="margin-top:-60px;margin-left: 20px;">1</span>
                                      <span id="goal-text2" class="goal-value pull-right" style="margin-top:-60px;margin-right:40px;">100 days</span>
                                </div>
                                <h5 class="text-info" style="margin-top:45px;margin-left:50px;">Stock Available in days</h5>
                            </div>
                        </div>
            </div>

    <div class="col-md-5 col-sm-5">
<div class="x_panel stktabel">
            <table class="table table-striped" style="display:block;width=200%"; id="stktabel">
                        <thead>
                         <tr>
                          <th class="design1" rowspan="2">#</th>
                          <th class="design1" rowspan="2">Items</th>
                          <th class="design1" colspan="2">Available Stock</th>
                          <th class="design1" colspan="2">Avg Consumption of last 7 days </th>
                          <th colspan="2" class="design1" rowspan="2">Days of stock Available</th>
                        </tr>
                        <tr>
                          <th class="design">Qty( Cases)</th>
                          <th class="design">Qty( Bottles)</th>
                          <th class="design">Qty( Cases)</th>
                          <th class="design">Qty( Bottles)</th>
                        </tr>

                        </thead>

                        <tbody>
                          <tr>
                          </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                        </tr>
                      </tfoot>

                      </table>

            </div>
            </div>
</div>


                   <div class="x_panel">
          <div class="page-title">
            <div class="title_left">
              <h3 style="font-size:20px; font-weight:600;"> Depot  Available Stock </h3>
            </div>
            <div class="title_right">
                <div class="col-md-5 col-sm-5 offset-md-5">
											 <input type="hidden" name="deponame1" id="deponame1" />
												<select class="form-control depot" name="depoid1" id="depoid1" required>
                                                    <option value=""> depot</option>

                                                    {% for data in depolist %}
                                                    {% if data.status == 'Active' %}
                                                            {% if data.depoid == 'DEPO0089' %}
													            <option value="{{ data.depoid  }}" selected>{{  data.deponame  }}</option>
                                                            {% else %}
                                                                <option value="{{ data.depoid  }}">{{  data.deponame  }}</option>
                                                            {% endif %}
                                                    {% endif %}
                                                    {% endfor %}
												</select>
										</div>

              <div class="col-md-2 col-sm-2">
                <label><input type="checkbox" id="depot_stock" class="js-switch"  /></label>
              </div>
            </div>
          </div>

                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="animated flipInY col-lg-2 col-md-2 col-sm-7 ">
                                <div class="tile-stats">
                                    <div class="count depotstock" style="color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Cases)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span>Available Stock</p>
                                </div>
                            </div>
                            <div class="animated flipInY col-lg-3 col-md-3 col-sm-7 ">
                                <div class="tile-stats">
                                    <div class="count depotstock1" style="color:red;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Bottles)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span> Available Stock</p>
                                </div>
                            </div>
                            <div class="animated flipInY col-lg-2 col-md-2 col-sm-7 ">
                                <div class="tile-stats" >
                                    <div class="count depotcase" style="color:green;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Cases)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span>Avg Consumption of last 7 days</p>
                                </div>
                            </div>
                            <div class="animated flipInY col-lg-3 col-md-3 col-sm-7">
                                <div class="tile-stats">
                                    <div class="count depotbott" style="color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty(Bottles)</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span> Avg Consumption of last 7 days</p>

                                </div>
                            </div>
                            <div class="animated flipInY col-lg-2 col-md-2 col-sm-">
                                <div class="tile-stats">
                                    <div class="count depotdays" style="color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                                    <div style="text-align:center;margin-left: auto;margin-right: auto;">Days</div>
                                    <p><span class="fa fa-info" aria-hidden="true"></span>Stock Available</p>
                                </div>
                            </div>

                        </div>
                    </div></div>
                     </div>
<div class="x_panel  depot_stock_chart">
                     <div class="x_content">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row" style="text-align: center;">
                                <div class="col-md-4">
                                      <h3  class="text-danger" style="margin: 125px 3px 149px -10px;display:none;" id="lblNoStock">No Stock Available</h3>
                                    <div id="echart-depot1"   style="height:350px;margin-top:-60px;margin-left:-60px;"></div>
                                 <h4 style="margin:18px">Stock Available</h4>
                                </div>
                                <div class="col-md-3">
                                      <h3 class="text-danger" style="margin: 125px 3px 149px -10px;display:none;" id="lblNoStock1">No Stock Available</h3>
                                    <div id="echart-pies2"    style="height:350px;margin-top:-60px;margin-left:-60px;"></div>
                                  <h4 style="margin:18px">Avg consumption of last 7 days</h4>
                                </div>
                                <div class="col-md-5">
                                   <div class="clearfix"></div>
                    <!--<table id="datatable-buttons" class="display table-striped table-bordered" style="width:100%">-->
                                      <table   class="table table-striped jambo_table bulk_action"  style="display:block;" id="depottabel" >
                      <thead>
                        <tr>
                          <th class="design1" rowspan="2">#</th>
                          <th class="design1" rowspan="2">Items</th>
                          <th class="design1" colspan="2">Available Stock</th>
                          <th class="design1" colspan="2">Avg Consumption of last 7 days </th>
                          <th colspan="2" class="design1" rowspan="2">Days of stock Available</th>
                        </tr>
                        <tr>
                          <th class="design">Qty(Cases)</th>
                          <th class="design">Qty(Bottles)</th>
                          <th class="design">Qty(Cases)</th>
                          <th class="design">Qty(Bottles)</th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                      <tfoot>
                        <tr>
                        </tr>
                      </tfoot>
                    </table>
                  </div>
                </div>
                                </div>
                            </div>
                        </div>
</div>
                   <div class="row">
    <div class="col-md-8 col-sm-8">
     <div class="x_panel">
         <div class="page-title">
            <div class="title_left">
              <h3 style="font-size:20px; font-weight:600;">Qty Accepted from vendor</h3>
            </div>
            <div class="title_right">
                <form  method="POST" id="myForm2" action="warehouse_stock"  enctype="multipart/form-data">
                {% csrf_token %}
                <div class="col-sm-6 col-md-6" style="margin-left:150px;">
                  <input class="form-control" type="date" name="date"  id="grndate"  value="{{ request.POST.date }}"  required>
                </div>
              <div class="col-md-2 col-sm-2">
                <!--<label><input type="checkbox" id="checked3" class="js-switch"  /></label>-->
              </div>
            </div>
          </div>
          <div class="x_content">
            <div class="animated flipInY col-lg-3 col-md-3 col-sm-3">
              <div class="tile-stats" >
                <div class="count pendinggrn" style="color:green;color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
                <div style="text-align:center;margin-left: auto;margin-right: auto;">Pending</div>
                <p class="d-none"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>Pending GRN</p>
              </div>
            </div>
               <div class="animated flipInY col-lg-3 col-md-3 col-sm-3">
              <div class="tile-stats" >
                <div class="count verifiedgrn" style="color:#9F9D1B;color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
              <div style="text-align:center;margin-left: auto;margin-right: auto;">Verified</div>
                <p class="d-none"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>Verified GRN</p>
              </div>
            </div>
            <div class="animated flipInY col-lg-3 col-md-3 col-sm-3">
              <div class="tile-stats">
                <div class="count acceptedqty" style="color: #3493fb;color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
           <div style="text-align:center;margin-left: auto;margin-right: auto;">Accepted Qty(Cases)</div>
                <p class="d-none"><span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>Accepted Qty(Cases)</p>
              </div>
            </div>
            <div class="animated flipInY col-lg-3 col-md-3 col-sm-3">
              <div class="tile-stats">
                <div class="count acceptdbott" style="color:red;color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
             <div style="text-align:center;margin-left: auto;margin-right: auto;">Accepted Qty(Bottles)</div>
                <p class="d-none"><span class="glyphicon glyphicon-download" aria-hidden="true"></span>Accepted Qty(In bottles)</p>
              </div>
            </div>
          </div>
         <div class="col-md-12 col-sm-12">
            <div class="clearfix"></div>

                      <table class="table table-striped" style="display:block;width=100%";  id="pendingtabel">
                        <thead>
                          <tr>
                            <th class="design1" rowspan="2">#</th>
                            <th class="design1" rowspan="2">Received Date</th>
                            <th  class="design1" rowspan="2">Manufacture</th>
                               <!--<th  class="design1" rowspan="2">Warehouse</th>-->
                            <th class="design1" rowspan="2">Product</th>
                            <th class="design1" colspan="2">Today</th>
                            <th  class="design1" colspan="2">This month</th>
                          </tr>
                          <tr>
                            <!--<th class="design">Invoice no</th>-->
                            <th class="design">Qty(In Cases)</th>
                            <th class="design">Qty(In Bottles)</th>
                            <th class="design">Qty(In Cases)</th>
                            <th class="design">Qty(In Bottles)</th>
                          </tr>
                        </thead>

                        <tbody>
                          <tr>
                          </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                        </tr>
                      </tfoot>

                      </table>
         </div>
     </div>
    </div>

                    <div class="col-md-4 col-sm-4">
                        <div class="x_panel">
                                <h3>Grn Details</h3>
                            <div class="x_content">
                                   <h3 style="margin-top: 100px;margin-bottom: 200px;margin-left: 90px;margin-right: -1000px;display:none;" id="grnstatus">No Pending GRN</h3>
                                <div id="echart_donut2" style="height:240px;margin-top: -65px;margin-right:10px;"></div>
                            </div>
                        </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12">
                        <div class="x_panel">
                                <h3>Accepted Quantity</h3>
                            <div class="x_content">
                                   <h3 style="margin-top: 100px;margin-bottom: 200px;margin-left: 90px;margin-right: -1000px;display:none;" id="lblNoStock2">No Pending GRN</h3>
                                 <canvas id="mybarChart1"></canvas>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
<div class="row">
    <div class="col-md-5 col-sm-5">
        <div class="x_panel">
          <div class="page-title">
            <div class="title_left">
              <h3 style="color:#14c38e;margin-right:-10px;">Depots pending indent</h3>
            </div>
            <div class="title_right">
                   <div class="col-md-10 col-sm-10">
											 <input type="hidden" name="deponame1" id="deponame" />
												<select class="form-control depot" name="depoid" id="depoid" required>
                                                    <option value=""> depot</option>

                                                    {% for data in depolist %}
                                                    {% if data.status == 'Active' %}
                                                            {% if data.depoid == 'DEPO0089' %}
													            <option value="{{ data.depoid  }}" selected>{{  data.deponame  }}</option>
                                                            {% else %}
                                                                <option value="{{ data.depoid  }}">{{  data.deponame  }}</option>
                                                            {% endif %}
                                                    {% endif %}
                                                    {% endfor %}
												</select>
										</div>

              <div class="col-md-2 col-sm-2">
                <label><input type="checkbox" id="depots_indent" class="js-switch"  /></label>
              </div>
            </div>
          </div>
          <div class="x_content">
            <div class="animated flipInY col-lg-4 col-md-4 col-sm-4">
              <div class="tile-stats" >
                <div class="count pendingind" style="color:green;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
         <div style="text-align:center;margin-left: auto;margin-right: auto;">Pending</div>
                <p class="d-none"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>Pending Indents</p>
              </div>
            </div>
            <div class="animated flipInY col-lg-4 col-md-4 col-sm-4">
              <div class="tile-stats">
                <div class="count indentcases" style="color: #3493fb;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
              <div style="text-align:center;margin-left: auto;margin-right: auto;">Verified</div>
                <p class="d-none"><span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>Verified indents</p>
              </div>
            </div>
            <div class="animated flipInY col-lg-4 col-md-4 col-sm-4">
              <div class="tile-stats">
                <div class="count indbottles" style="color:red;text-align:center;margin-left: auto;margin-right: auto;font-size:30px;"></div>
             <div style="text-align:center;margin-left: auto;margin-right: auto;">Qty Indented(Cases)</div>
                <p class="d-none"><span class="glyphicon glyphicon-download" aria-hidden="true"></span>Qty indented(In Cases)</p>
              </div>
            </div>

               <div class="col-md-4">
                   <h5 class="text-danger" style="width: 300px; height: 200px;margin-top:140px;margin-left:170px;"id="lblindent">No data Available</h5>
                                    <div id="echart-indent"   style="width: 300px; height: 200px;margin-top:-20px;margin-left:100px;"></div>
                                <!-- <h4 style="margin-left:90px;margin-right:-450px;margin-top:10px;" class="text-info textind">Qty indent versus Qty indented</h4>-->
                                </div>

            <div class="col-md-12 col-sm-12">
                  <table class="table table-striped" style="display:none;width=200%"; id="pendingind">
                        <thead>
                          <tr>
                            <th class="design1" rowspan="2">#</th>
                              <th class="design1" rowspan="2">Items</th>
                              <th  class="design1" colspan="2">Pending indent Qty</th>
                              <th class="design1" colspan="2">Verified indent Qty</th>

                          </tr>
                            <tr>
                            <!--<th class="design">Invoice no</th>-->
                            <th class="design">Qty(In Cases)</th>
                            <th class="design">Qty(In Bottles)</th>
                            <th class="design">Qty(In Cases)</th>
                            <th class="design">Qty(In Bottles)</th>
                          </tr>
                        </thead>

                        <tbody>
                          <tr>
                          </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                        </tr>
                      </tfoot>

                      </table>

              </form>
            </div>
          </div>
        </div>
    </div>
    <div class="col-md-7 col-sm-7">
<div class="x_panel">
           <div class="page-title">
            <div class="title_left">
              <h5 style="color:#14c38e">Depots holding less stock</h5>
            </div>
          </div>
            <table class="table table-striped" style="display:block;width=200%"; id="depots_less_stock">
                        <thead>
                          <tr>
                            <th class="design1" rowspan="2">S NO</th>
                            <th class="design1" rowspan="2">Depot name</th>
                              <th class="design1" rowspan="2">Product</th>
                              <th  class="design1" rowspan="2">Average requirement</th>
                                <th class="design1" rowspan="2">Stock Available(In quantity)</th>
                            <th class="design1" rowspan="2">Stock Available(In days)</th>
                          </tr>

                        </thead>

                        <tbody>
                          <tr>
                          </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                        </tr>
                      </tfoot>

                      </table>

            </div>
            </div>
</div>
</div>


<script>

  var chart_gauge_settings = {
        lines: 12,
        angle: 0,
        lineWidth: 0.4,
        pointer: {
            length: 0.75,
            strokeWidth: 0.042,
            color: '#1D212A'
        },
        limitMax: 'false',
        colorStart: '#D23939',
        colorStop: '#D23939',
        strokeColor: '#1ABC9C',
        generateGradient: true
    };
 function updateEchartPieChart(itemslist) {
        var echartPie = echarts.init(document.getElementById('echart-depot1'), "");
          var count = 0;
          var seriesData = [];
          var legendData = [];
          for (var i = 0; i < itemslist.length; i++) {
            var item = itemslist[i];
              if(item.stock_botteles!="0"){
               seriesData.push({
                 value: item.stock_cases,
                 name: item.itemname
               });
              count++;
            }
            legendData.push(item.itemname);
          }
          if (count === 0) {
              $('#echart-depot1').hide();
              $('#lblNoStock').show();
          } else {
              $('#echart-depot1').show();
              $('#lblNoStock').hide();
          }
          echartPie.setOption({
              tooltip: {
                  trigger: 'item',
                  formatter: "{a} <br/>{b} : {c} ({d}%)"
              },
              legend: {
                  x: 'center',
                  y: 'bottom',
                  data: legendData
              },
              toolbox: {
                  show: true,
                  feature: {
                      magicType: {
                          show: true,
                          type: ['pie', 'funnel'],
                          option: {
                              funnel: {
                                  x: '25%',
                                  width: '50%',
                                  funnelAlign: 'left',
                                  max: 1548
                              }
                          }
                      },

                  }
              },
              calculable: true,
                series: [{
                  name: 'Chart',
                  type: 'pie',
                  radius: '55%',
                  center: ['50%', '48%'],
                  data: seriesData // Use the processed 'seriesData' array
                }]
          });

          var dataStyle = {
              normal: {
                  label: {
                      show: false
                  },
                  labelLine: {
                      show: false
                  }
              }
          };

          var placeHolderStyle = {
              normal: {
                  color: 'rgba(0,0,0,0)',
                  label: {
                      show: false
                  },
                  labelLine: {
                      show: false
                  }
              },
              emphasis: {
                  color: 'rgba(0,0,0,0)'
              }
          };
       var echartPie = echarts.init(document.getElementById('echart-pies2'), "");
          var count =0;
          var seriesData = [];
          var legendData = [];

          for (var i = 0; i < itemslist.length; i++) {
            var item = itemslist[i];
              if(item.consumption_cases!="0"){
               seriesData.push({
                 value: item.consumption_cases,
                 name: item.itemname
               });
                count++;
            }
            legendData.push(item.itemname);
          }
          if (count === 0) {
              $('#echart-pies2').hide();
              $('#lblNoStock1').show();
          } else {
              $('#echart-pies2').show();
              $('#lblNoStock1').hide();
          }
          echartPie.setOption({
              tooltip: {
                  trigger: 'item',
                  formatter: "{a} <br/>{b} : {c} ({d}%)"
              },
              legend: {
                  x: 'center',
                  y: 'bottom',
                  data: legendData
              },
              toolbox: {
                  show: true,
                  feature: {
                      magicType: {
                          show: true,
                          type: ['pie', 'funnel'],
                          option: {
                              funnel: {
                                  x: '25%',
                                  width: '50%',
                                  funnelAlign: 'left',
                                  max: 1548
                              }
                          }
                      },

                  }
              },
              calculable: true,
                series: [{
                  name: 'Chart',
                  type: 'pie',
                  radius: '55%',
                  center: ['50%', '48%'],
                  data: seriesData // Use the processed 'seriesData' array
                }]
          });

          var dataStyle = {
              normal: {
                  label: {
                      show: false
                  },
                  labelLine: {
                      show: false
                  }
              }
          };

          var placeHolderStyle = {
              normal: {
                  color: 'rgba(0,0,0,0)',
                  label: {
                      show: false
                  },
                  labelLine: {
                      show: false
                  }
              },
              emphasis: {
                  color: 'rgba(0,0,0,0)'
              }
          };
 }
 function grnchart(total,itemslist){

 if ($('#mybarChart1').length) {
        var ctx = document.getElementById("mybarChart1");
        var mybarChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ["Today", "Current month"],
                datasets: [{
                    label: '1000ml',
                    backgroundColor: "#26B99A",
                    data: [parseFloat(itemslist[0].FTD_cases), parseFloat(itemslist[0].MTD_cases)]

                },
                 {
                    label: '500ml',
                    backgroundColor: "#26B99A",
                    data: [parseFloat(itemslist[1].FTD_cases), parseFloat(itemslist[1].MTD_cases)]

                },{
                    label: '250ml',
                    backgroundColor: "#03586A",
                    data: [parseFloat(itemslist[2].FTD_cases), parseFloat(itemslist[2].MTD_cases)]

                }]
            },

            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });

    }

    if ($('#echart_donut2').length) {
        var echartDonut = echarts.init(document.getElementById('echart_donut2'), "");
        var seriesData = [];
        var count1 = 0;
          for (var i = 0; i < total.length; i++) {
            var item = total[i];
            if(item.pending_grn !="0" ){

               seriesData.push({
                 value: item.pending_grn,
                 name: 'Pending GRN'
               });
               count1++;
            }
             if(item.total_grn !="0" ){

               seriesData.push({
                 value: item.total_grn,
                 name: 'Total GRN'
               });
               count1++;
            }
            if(item.verified_grn !="0" ){

               seriesData.push({
                 value: item.verified_grn,
                 name: 'Verified GRN'
               });
            }
            count1++;
          }
        if (count1 === 0) {
              $('#echart_donut2').hide();
              $('#grnstatus').show();
          } else {
              console.log(count1);
              $('#echart_donut2').show();
              $('#grnstatus').hide();
          }
        echartDonut.setOption({
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            calculable: true,
            legend: {
                x: 'center',
                y: 'bottom',
                data: ['Pending GRN', 'Verified GRN','Total GRN']
            },
            toolbox: {
                show: true,
                feature: {
                    magicType: {
                        show: true,
                        type: ['pie', 'funnel'],
                        option: {
                            funnel: {
                                x: '25%',
                                width: '50%',
                                funnelAlign: 'center',
                                max: 1548
                            }
                        }
                    },
                    //restore: {
                    //    show: true,
                    //    title: "Restore"
                    //},
                    //saveAsImage: {
                    //    show: true,
                    //    title: "Save Image"
                    //}
                }
            },
            series: [{
                name: 'Access to the resource',
                type: 'pie',
                radius: ['35%', '55%'],
                itemStyle: {
                    normal: {
                        label: {
                            show: true
                        },
                        labelLine: {
                            show: true
                        }
                    },
                    emphasis: {
                        label: {
                            show: true,
                            position: 'center',
                            textStyle: {
                                fontSize: '14',
                                fontWeight: 'normal'
                            }
                        }
                    }
                },
                data: seriesData
            }]
        });

    }


  }
  function stock_days(total,itemslist){
        var chart_gauge_sales_elem;
        var chart_gauge_01;
        var item_gauge;
        var chart_gauge_settings = {
              lines: 12,
          angle: 0,
          lineWidth: 0.4,
          pointer: {
              length: 0.75,
              strokeWidth: 0.042,
              color: '#1D212A'
          },
          limitMax: 'false',
          colorStart: '#D23939',
          colorStop: '#D23939',
          strokeColor: '#1ABC9C',
          generateGradient: true
      };
   var item;
  for (var i = 0; i < total.length; i++) {
            item = total[i];
    }
    if ($('#gauge-text2').length) {
        var indays=parseInt(item.indays);
          $('#gauge-text2').html(indays);
          chart_gauge_03.maxValue = 100;
            if (indays !== 0) {
                  chart_gauge_03.animationSpeed = 32;
                  chart_gauge_03.setTextField(indays);
                  chart_gauge_03.set(indays);
              } else {
                  chart_gauge_03.animationSpeed = 32;
                  chart_gauge_03.setTextField(0.1);
                  chart_gauge_03.set(0.1);
              }

      }
       var seriesData = [];

     for (var i = 0; i < itemslist.length; i++) {
            var item = itemslist[i];
              if(item.stock_botteles!="0"){
               seriesData.push({
                 period: item.itemname,
                 "Qty(Cases)": item.stock_cases,
                 "Qty(Bottles)": item.consumption_cases
               });

            }

          }
      if ($('#graph_bar_group1').length) {

        Morris.Bar({
            element: 'graph_bar_group1',
            data: seriesData,
            xkey: 'period',
            barColors: ['#26B99A', '#34495E', '#ACADAC', '#3498DB'],
            ykeys: ["Qty(Cases)","Qty(Bottles)"],
            labels: ["Qty(Cases)","Qty(Bottles)"],
            hideHover: 'auto',
            xLabelAngle: 60,
            resize: true
        });

    }
    }
    function depotindent(total){
        var seriesData = [];
        var count=0;
         var echartPie = echarts.init(document.getElementById('echart-indent'), "");
           for (var i = 0; i < total.length; i++) {
            var item = total[i];
              if(item.indent_count !="0"){
               seriesData.push({
                 value: item.indent_count,
                 name: 'total indent'
               });
               count++;
            }
            if(item.pending_count !="0"){
               seriesData.push({
                 value: item.pending_count,
                 name: 'pending indent'
               });
               count++;
            }
            if(item.verified_count !="0"){
               seriesData.push({
                 value: item.verified_count,
                 name: 'verified indent'
               });
               count++;
            }

         }
    if (count === 0) {
              $('#echart-indent').hide();
              $('#lblindent').show();
          } else {
              $('#echart-indent').show();
              $('#lblindent').hide();
          }

         echartPie.setOption({
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                x: 'center',
                y: 'bottom',
                data: ['total indent', 'pending indent', 'verified indent']
            },
            toolbox: {
                show: true,
                feature: {
                    magicType: {
                        show: true,
                        type: ['pie', 'funnel'],
                        option: {
                            funnel: {
                                x: '25%',
                                width: '50%',
                                funnelAlign: 'left',
                                max: 1548
                            }
                        }
                    },

                }
            },
            calculable: true,
            series: [{
                name: 'Chart',
                type: 'pie',
                radius: '55%',
                center: ['50%', '48%'],
                data: seriesData
                            }]
        });

        var dataStyle = {
            normal: {
                label: {
                    show: false
                },
                labelLine: {
                    show: false
                }
            }
        };

        var placeHolderStyle = {
            normal: {
                color: 'rgba(0,0,0,0)',
                label: {
                    show: false
                },
                labelLine: {
                    show: false
                }
            },
            emphasis: {
                color: 'rgba(0,0,0,0)'
            }
        };

    }

 window.onload=function(){

     if ($('#graph_bar').length) {
     var date=new Date(); //$("#getdate").val();
     var today_date=date.getDate()+"/"+ (parseInt(date.getMonth())+1);

        Morris.Bar({
            element: 'graph_bar',
            data: [
                { device: today_date+' 1000ml', geekbench: 2000 },
                { device: today_date+' 500ml', geekbench: 9113 },
                { device: today_date+' 250ml', geekbench: 2500 },
                { device: 'Total 1000ml', geekbench: 5000 },
                { device: 'Total 500ml', geekbench: 9113 },
                { device: 'Total 250ml', geekbench: 2000 },
            ],
            xkey: 'device',
            ykeys: ['geekbench'],
            labels: [''],
            barRatio: 0.4,
            barColors: ['#26B99A', '#34495E', '#ACADAC', '#3498DB'],
            xLabelAngle: 35,
            hideHover: 'auto',
            resize: true
        });

    }

    if($('#graph_bar2').length) {

        Morris.Bar({
            element: 'graph_bar2',
            data: [
                { device: 'Karimnagar 1000ml', geekbench: 200 },
                { device: 'Karimnagar 500ml', geekbench: 9113 },
                { device: 'Karimnagar 250ml', geekbench: 250 },
                { device: 'Uppal 1000ml', geekbench: 6959 },
                { device: 'Uppal 500ml', geekbench: 9659 },
                { device: 'Uppal 250ml', geekbench: 252 },
            ],
            xkey: 'device',
            ykeys: ['geekbench'],
            labels: [''],
            barRatio: 0.4,
            barColors: ['#452754', '#452754', '#452755', '#452754'],
            xLabelAngle: 35,
            hideHover: 'auto',
            resize: true
        });

    }

    if($('#graph_bar3').length) {

        Morris.Bar({
            element: 'graph_bar3',
            data: [
                { device: 'Karimnagar 1000ml', geekbench: 200 },
                { device: 'Karimnagar 500ml', geekbench: 9113 },
                { device: 'Karimnagar 250ml', geekbench: 250 },
                { device: 'Uppal 1000ml', geekbench: 6959 },
                { device: 'Uppal 500ml', geekbench: 9659 },
                { device: 'Uppal 250ml', geekbench: 252 },
            ],
            xkey: 'device',
            ykeys: ['geekbench'],
            labels: [''],
            barRatio: 0.4,
            barColors: ['#26B99A', '#34495E', '#ACADAC', '#3498DB'],
            xLabelAngle: 35,
            hideHover: 'auto',
            resize: true
        });

      }

 }



    $(document).ready(function() {
    // When the button with ID "checked1" is clicked
    $("#checked1").click(function() {
      if ($(this).is(":checked")) {
       $("#echart-depot1").show();
      $("#stktabel").show();
    }
    else{
     $("#echart-depot1").show();
      $("#stktabel").show();
    }
    });
  });
   $(document).ready(function() {
    // When the button with ID "checked1" is clicked
    $("#checked2").click(function() {
      if ($(this).is(":checked")) {
      $(".echart-pies2").hide();
      $('#chart_gauge_sales1').hide();
      $("#pendingtabel").show();
    }
    else{
     $(".echart-pies2").show();
      $('#chart_gauge_sales1').show();
      $("#pendingtabel").hide();
    }
    });
  });

  $(document).ready(function() {
    // When the button with ID "checked1" is clicked
    $("#checked3").click(function() {
      if ($(this).is(":checked")) {
      $("#graph_bar").hide();
      $("#completetabel").show();
    }
    else{
     $("#graph_bar").show();
      $("#completetabel").hide();
    }
    });
  });
$(document).ready(function() {
$.ajax({
  type: "GET",
  url: "{% url 'zonal_dashboard_data' %}", // Replace 'your_ajax_endpoint' with the actual URL for your AJAX endpoint
  data: {
    'csrfmiddlewaretoken': '{{ csrf_token }}'
  },
  success: function(data) {

     var total =  data.data.totallist;
     var message = data.data.message;
     var itemslist = data.data.itemwiselist
      if(message != "Data found")
      {
       $("#lblNoStock2").html(data.message);
       $("#lblNoStock2").show();
       $("#echart-pies2").hide();
       $("#completetabel").hide();
      }else{

         chart_gauge_sales_elem = document.getElementById('chart_gauge_03');
         chart_gauge_03 = new Gauge(chart_gauge_sales_elem).setOptions(chart_gauge_settings);
         for (var i = 0; i < total.length; i++) {
            item = total[i];
         }
         stock_days(total,itemslist);
      }
     var tableBody = $('#stktabel  tbody');
             for (var i = 0; i < itemslist.length; i++) {
                var item = itemslist[i];

                var row = $('<tr>');
                row.append($('<td>').text(i + 1));  // S No
                row.append($('<td>').text(item.itemname));
                row.append($('<td>').text(item.stock_cases));
                row.append($('<td>').text(item.stock_botteles));  // Quantity
                row.append($('<td>').text(item.consumption_cases));
                row.append($('<td>').text(item.consumption_botteles));
                row.append($('<td>').text(item.indays));
                tableBody.append(row);
            }
     var tfootdata = $('#stktabel tfoot');
        tfootdata.empty();
        for (var i = 0; i < total.length; i++) {
                var item = total[i];

                $('.zonalcases').text(item.stock_cases);
                $('.zonalbott').text(item.stock_botteles);
                $('.avgcases').text(item.consumption_cases);
                $('.avgbott').text(item.consumption_botteles);
                $('.zonaldays').text(item.indays);
                var row = $('<tr>');
                row.append($('<th>').text('Grand Total').attr('colspan', 2).addClass('design1'));
                row.append($('<td>').text(item.stock_cases));
                row.append($('<td>').text(item.stock_botteles));
                row.append($('<td>').text(item.consumption_cases));
                row.append($('<td>').text(item.consumption_botteles));
                row.append($('<td>').text(item.indays));
                tfootdata.append(row);
          }

  },
  error: function(jqXHR, textStatus, errorThrown) {
    console.error("Error occurred: " + textStatus, errorThrown);
    // Handle the error case here, if required
  }
});
});

$(document).ready(function() {
$.ajax({
  type: "GET",
  url: "{% url 'zonal_grn_report' %}", // Replace 'your_ajax_endpoint' with the actual URL for your AJAX endpoint
  data: {
    'csrfmiddlewaretoken': '{{ csrf_token }}'
  },
  success: function(data) {
         var total =  data.data.list;
         var itemslist = data.data.itemlist;
         var message = data.data.message;
         if(message != "Data found")
          {
           $("#grnstatus").html(data.message);
           $("#grnstatus").show();
           $("#echart_donut2").hide();
         }else{
           grnchart(total,itemslist);
         }
        var tableBody = $('#pendingtabel  tbody');
        tableBody.empty();
              for (var i = 0; i < itemslist.length; i++) {
                var item = itemslist[i];
                var row = $('<tr>');
                row.append($('<td>').text(i + 1));  // S No
                row.append($('<td>').text(item.received_date));
                row.append($('<td>').text(item.manufacture));
                row.append($('<td>').text(item.itemname));  // Quantity
                row.append($('<td>').text(item.FTD_cases));
                row.append($('<td>').text(item.FTD_botteles));
                row.append($('<td>').text(item.MTD_cases));
                row.append($('<td>').text(item.MTD_botteles));
                tableBody.append(row);
              }
       var tfootdata = $('#pendingtabel tfoot');
       tfootdata.empty();
         for (var i = 0; i < total.length; i++) {
                var item = total[i];
                $('.pendinggrn').text(item.pending_grn);
                $('.verifiedgrn').text(item.verified_grn);
                $('.acceptedqty').text(item.ftd_cases);
                $('.acceptdbott').text(item.ftd_botteles);
                var row = $('<tr>');
                row.append($('<th>').text('Grand Total').attr('colspan', 4).addClass('design1'));
                row.append($('<td>').text(item.ftd_cases));
                row.append($('<td>').text(item.ftd_botteles));
                row.append($('<td>').text(item.mtd_cases));
                row.append($('<td>').text(item.mtd_botteles));
                tfootdata.append(row);
          }

  },
  error: function(jqXHR, textStatus, errorThrown) {
    console.error("Error occurred: " + textStatus, errorThrown);
    // Handle the error case here, if required
  }
});
});
$('#grndate').change(function() {
    grndate = $(this).val();
    $.ajax({
      type: "POST",
      url: "{% url 'zonal_grn_report' %}", // Replace 'your_ajax_endpoint' with the actual URL for your AJAX endpoint
      data: {
      'fdate':grndate, 'csrfmiddlewaretoken': '{{ csrf_token }}'
      },
      success: function(data) {
      var total =  data.data.list;
      var itemslist = data.data.itemlist;
       if(message != "Data found")
      {
       $("#lblNoStock2").html(data.message);
       $("#grnstatus").show();
       $("#echart_donut2").hide();
      }else{
       grnchart(total,itemslist);
      }
            var tableBody = $('#pendingtabel  tbody');
            tableBody.empty();
                  for (var i = 0; i < itemslist.length; i++) {
                    var item = itemslist[i];
                    var row = $('<tr>');
                    row.append($('<td>').text(i + 1));  // S No
                    row.append($('<td>').text(item.received_date));
                    row.append($('<td>').text(item.manufacture));
                    row.append($('<td>').text(item.itemname));  // Quantity
                    row.append($('<td>').text(item.FTD_cases));
                    row.append($('<td>').text(item.FTD_botteles));
                    row.append($('<td>').text(item.MTD_cases));
                    row.append($('<td>').text(item.MTD_botteles));
                    tableBody.append(row);
                  }
           var tfootdata = $('#pendingtabel tfoot');
           tfootdata.empty();
             for (var i = 0; i < total.length; i++) {
                    var item = total[i];
                    $('.pendinggrn').text(item.pending_grn);
                    $('.verifiedgrn').text(item.verified_grn);
                    $('.acceptedqty').text(item.ftd_cases);
                    $('.acceptdbott').text(item.ftd_botteles);
                    var row = $('<tr>');
                    row.append($('<th>').text('Grand Total').attr('colspan', 4).addClass('design1'));
                    row.append($('<td>').text(item.ftd_cases));
                    row.append($('<td>').text(item.ftd_botteles));
                    row.append($('<td>').text(item.mtd_cases));
                    row.append($('<td>').text(item.mtd_botteles));
                    tfootdata.append(row);
              }

      },
      error: function(jqXHR, textStatus, errorThrown) {
        console.error("Error occurred: " + textStatus, errorThrown);
        // Handle the error case here, if required
      }
    });
});

$(document).ready(function() {
var deponame = $('#depoid1').val();
$.ajax({
  type: "POST",
  url: "{% url 'zonal_depotwise_data' %}", // Replace 'your_ajax_endpoint' with the actual URL for your AJAX endpoint
  data: {
   'deponame':deponame, 'csrfmiddlewaretoken': '{{ csrf_token }}'
  },
  success: function(data) {
     var total =  data.data.totallist;
     var itemslist = data.data.itemwiselist;
     message = data.data.message
     console.log(data);
     if(message != "Data found")
      {
       $("#lblNoStock2").html(data.message);
       $("#lblNoStock2").show();
       $("#echart-pies2").hide();
       $("#completetabel").hide();
      }else{
       updateEchartPieChart(itemslist);
      }
      var tableBody = $('#depottabel  tbody');
      tableBody.empty();
              for (var i = 0; i < itemslist.length; i++) {
                var item = itemslist[i];
                var row = $('<tr>');
                row.append($('<td>').text(i + 1));  // S No
                row.append($('<td>').text(item.itemname));
                row.append($('<td>').text(item.stock_cases));
                row.append($('<td>').text(item.stock_botteles));  // Quantity
                row.append($('<td>').text(item.consumption_cases));
                row.append($('<td>').text(item.consumption_botteles));
                row.append($('<td>').text(item.indays));
                tableBody.append(row);
              }
       var tfootdata = $('#depottabel tfoot');
       tfootdata.empty();
         for (var i = 0; i < total.length; i++) {
                var item = total[i];
                $('.depotstock').text(item.stock_cases);
                $('.depotstock1').text(item.stock_botteles);
                $('.depotcase').text(item.consumption_cases);
                $('.depotbott').text(item.consumption_botteles);
                $('.depotdays').text(item.indays);
                var row = $('<tr>');
                row.append($('<th>').text('Grand Total').attr('colspan', 2).addClass('design1'));
                row.append($('<td>').text(item.stock_cases));
                row.append($('<td>').text(item.stock_botteles));
                row.append($('<td>').text(item.consumption_cases));
                row.append($('<td>').text(item.consumption_botteles));
                row.append($('<td>').text(item.indays));
                tfootdata.append(row);
          }

  },
  error: function(jqXHR, textStatus, errorThrown) {
    console.error("Error occurred: " + textStatus, errorThrown);
    // Handle the error case here, if required
  }
});
});

$('#depoid1').change(function() {
var deponame = $('#depoid1').val();
$.ajax({
  type: "POST",
  url: "{% url 'zonal_depotwise_data' %}", // Replace 'your_ajax_endpoint' with the actual URL for your AJAX endpoint
  data: {
   'deponame':deponame, 'csrfmiddlewaretoken': '{{ csrf_token }}'
  },
  success: function(data) {
     var total =  data.data.totallist;
     var itemslist = data.data.itemwiselist;
     message = data.data.message
     console.log(data);
     if(message != "Data found")
      {
       $("#lblNoStock2").html(data.message);
       $("#lblNoStock2").show();
       $("#echart-pies2").hide();
       $("#completetabel").hide();
      }else{
       updateEchartPieChart(itemslist);
      }

        var tableBody = $('#depottabel  tbody');
        tableBody.empty();
              for (var i = 0; i < itemslist.length; i++) {
                var item = itemslist[i];
                var row = $('<tr>');
                row.append($('<td>').text(i + 1));  // S No
                row.append($('<td>').text(item.itemname));
                row.append($('<td>').text(item.stock_cases));
                row.append($('<td>').text(item.stock_botteles));  // Quantity
                row.append($('<td>').text(item.consumption_cases));
                row.append($('<td>').text(item.consumption_botteles));
                row.append($('<td>').text(item.indays));
                tableBody.append(row);
              }
       var tfootdata = $('#depottabel tfoot');
       tfootdata.empty();
         for (var i = 0; i < total.length; i++) {
                var item = total[i];
                $('.depotstock').text(item.stock_cases);
                $('.depotstock1').text(item.stock_botteles);
                $('.depotcase').text(item.consumption_cases);
                $('.depotbott').text(item.consumption_botteles);
                $('.depotdays').text(item.indays);
                var row = $('<tr>');
                row.append($('<th>').text('Grand Total').attr('colspan',2).addClass('design1'));
                row.append($('<td>').text(item.stock_cases));
                row.append($('<td>').text(item.stock_botteles));
                row.append($('<td>').text(item.consumption_cases));
                row.append($('<td>').text(item.consumption_botteles));
                row.append($('<td>').text(item.indays));
                tfootdata.append(row);
          }

  },
  error: function(jqXHR, textStatus, errorThrown) {
    console.error("Error occurred: " + textStatus, errorThrown);
    // Handle the error case here, if required
  }
});
});
$(document).ready(function() {
var deponame = $('#depoid').val();
$.ajax({
  type: "POST",
  url: "{% url 'zonal_depotindent_data' %}", // Replace 'your_ajax_endpoint' with the actual URL for your AJAX endpoint
  data: {
   'deponame':deponame, 'csrfmiddlewaretoken': '{{ csrf_token }}'
  },
  success: function(data) {
     var total =  data.data.totallist;
     var itemslist = data.data.itemlist;
     message = data.data.message
     console.log(data);
     if(message != "Data found")
          {
           $("#lblindent").html(data.message);
           $("#lblindent").show();
           $("#echart-indent").hide();
          }else{
           depotindent(total);
      }
      var tableBody = $('#pendingind  tbody');
      tableBody.empty();
              for (var i = 0; i < itemslist.length; i++) {
                var item = itemslist[i];
                var row = $('<tr>');
                row.append($('<td>').text(i + 1));  // S No
                row.append($('<td>').text(item.itemname));
                row.append($('<td>').text(item.pen_qty_cases));
                row.append($('<td>').text(item.pen_qty_bottles));  // Quantity
                row.append($('<td>').text(item.ver_qty_cases));
                row.append($('<td>').text(item.ver_qty_bottles));
                tableBody.append(row);
              }
       var tfootdata = $('#pendingind tfoot');
       tfootdata.empty();
         for (var i = 0; i < total.length; i++) {
                var item = total[i];
                $('.pendingind').text(item.pending_count);
                $('.indentcases').text(item.verified_count);
                $('.indbottles').text(item.ver_qty_cases);
                //$('.depotbott').text(item.consumption_botteles);
                //$('.depotdays').text(item.indays);
                var row = $('<tr>');
                row.append($('<th>').text('Grand Total').attr('colspan', 2).addClass('design1'));
                row.append($('<td>').text(item.pen_qty_cases));
                row.append($('<td>').text(item.pen_qty_bottles));
                row.append($('<td>').text(item.ver_qty_cases));
                row.append($('<td>').text(item.ver_qty_bottles));
                tfootdata.append(row);
          }

  },
  error: function(jqXHR, textStatus, errorThrown) {
    console.error("Error occurred: " + textStatus, errorThrown);
    // Handle the error case here, if required
  }
});
});

$('#depoid').change(function() {
var deponame = $('#depoid').val();
$.ajax({
  type: "POST",
  url: "{% url 'zonal_depotindent_data' %}", // Replace 'your_ajax_endpoint' with the actual URL for your AJAX endpoint
  data: {
   'deponame':deponame, 'csrfmiddlewaretoken': '{{ csrf_token }}'
  },
  success: function(data) {
     var total =  data.data.totallist;
     var itemslist = data.data.itemlist;
     message = data.data.message
     console.log(data);
     if(message != "Data found")
          {
           $("#lblindent").html(data.message);
           $("#lblindent").show();
           $("#echart-indent").hide();
          }else{
           depotindent(total);
      }
        var tableBody = $('#pendingind  tbody');
        tableBody.empty();
              for (var i = 0; i < itemslist.length; i++) {
                var item = itemslist[i];
                var row = $('<tr>');
                row.append($('<td>').text(i + 1));  // S No
                row.append($('<td>').text(item.itemname));
                 row.append($('<td>').text(item.pen_qty_cases));
                row.append($('<td>').text(item.pen_qty_bottles));  // Quantity
                row.append($('<td>').text(item.ver_qty_cases));
                row.append($('<td>').text(item.ver_qty_bottles));
                tableBody.append(row);
              }
       var tfootdata = $('#pendingind tfoot');
       tfootdata.empty();
         for (var i = 0; i < total.length; i++) {
                var item = total[i];
                $('.pendingind').text(item.pending_count);
                $('.indentcases').text(item.verified_count);
                $('.indbottles').text(item.ver_qty_cases);
                var row = $('<tr>');
                row.append($('<th>').text('Grand Total').attr('colspan',2).addClass('design1'));
                row.append($('<td>').text(item.pen_qty_cases));
                row.append($('<td>').text(item.pen_qty_bottles));
                row.append($('<td>').text(item.ver_qty_cases));
                row.append($('<td>').text(item.ver_qty_bottles));
                tfootdata.append(row);
          }
  },
  error: function(jqXHR, textStatus, errorThrown) {
    console.error("Error occurred: " + textStatus, errorThrown);
    // Handle the error case here, if required
  }
});
});
 $(document).ready(function() {
    $("#depots_indent").click(function() {
      if ($(this).is(":checked")) {
       $("#echart-indent").hide();
       $('.textind').hide();
       $('#lblindent').hide();
      $("#pendingind").show();
    }
    else{
    $('#lblindent').show();
     $("#echart-indent").show();
     $('.textind').show();
      $("#pendingind").hide();
    }
    });
  });
  $(document).ready(function() {
    $("#depot_stock").click(function() {
      if ($(this).is(":checked")) {
       $(".depot_stock_chart").hide();

    }
    else{
     $(".depot_stock_chart").show();

    }
    });
  });
  $(document).ready(function() {
    $("#checked1").click(function() {
      if ($(this).is(":checked")) {
           $(".Consumption").hide();
           $(".days").hide();
           $(".stktabel").hide();
        }
    else{
     $(".Consumption").show();
     $(".days").show();
     $(".stktabel").show();
    }
    });
  });
$('#grndate').val(new Date().toJSON().slice(0,10));



</script>
{% endblock %}