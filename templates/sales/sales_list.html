{% extends 'base.html' %}

{% block htmlbody %}
<style>
	.style{
	position: absolute !important;
	width: 80% !important;
	 right: 20px;
	}
	</style>
<div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3 style="color:#1372ba"><b>Delivery Challan</b></h3>
              </div>

              <div class="title_right">
                <div class="col-md-6 col-sm-7 offset-md-9">
                <!----  <a href="add_grnitem"><button type="submit" class="btn btn-success">Add GRN Item</button> ------>
                </div>
            </div>
              </div>
            <div class="clearfix"></div>

            <div class="row">
              <div class="col-md-12 col-sm-12 ">
                <div class="x_panel">
                    <div class="clearfix"></div>
                  <div class="x_content">
                      <div class="row">
                          <div class="col-sm-12">
                            <div class="card-box table-responsive">
                                         <p class="text-muted font-13 m-b-30">
                    </p>
                        <table id="datatable-buttons" class="display table-bordered" style="width:100%">
                      <thead>
                        <tr>

                                     <th>S No</th>
                                     <th>Bus station</th>
                                    <th>Store Name</th>
                                    <th>Agent Name</th>
                                    <th>Agent Mobile</th>
                                    <!--<th>Store Invoice Number </th>
                                    <th>DC Number</th>-->
                                    <th>Delivery Data</th>
                                    <th>Itemcount</th>
                                    <th>Total</th>
                                    <th>Action</th>
                        </tr>
                      </thead>
                            {% for all_data in data %}
                       <tr>
                           <td>{{ forloop.counter }}</td>
                           <td>{{ all_data.bus_station }}</td>
                             <td>{{ all_data.storename }}</td>
                            <td>{{ all_data.del_agent_name  }}</td>
                           <td>{{ all_data.contactno }}</td>
                       <!--  <td> {{ all_data.sonumber }} </td>
                       <td>{{  all_data.dcnumber}}</td>-->
                        <td>{{ all_data.delivery_date }}</td>
                       <td>{{ all_data.itemcount }}</td>
                             <td class="text-success"><b>â‚¹ &nbsp{{ all_data.total }}</b></td>
                                <td>
                                   <a href="sales_item_list_pending/{{ all_data.sonumber }}/"><span class="badge badge-success">{{ all_data.status }} </span></a>
                                      <span class="badge badge-info" data-toggle="modal" onclick="VerifyClick('{{all_data.sonumber}}','{{ all_data.itemcount }}','{{ all_data.total }}','{{ all_data.uom }}','{{ all_data.mrp }}')"  data-target="#bs-example-modal-sm">Update</span>

                                </td>

                      </tr>
                      {% endfor %}
                      <tbody>
                      </tbody>
                      </table>
                  </div>
                  </div>
              </div>
            </div>
                </div>
                     <!--<div class="inner-fabs">
                                  <div class="fab round" id="fab3" data-tooltip="out pass"><a href="sales_list_outpass"><i class="fa fa-outdent"></i></a></div>
                                  <div class="fab round" id="fab2" data-tooltip="pending"><a href="sales_list"><i class="fa fa-outdent" ></i></a></div></a>
                                    </div>
                                <div class="fab round" id="fab1"><i class="fa fa-filter" id="fabIcon"></i></div>
                        </div>-->
                </div>
              </div>
            </div>
          </div>
</div>
<div class="modal custom-modal fade"  id="bs-example-modal-sm" tabindex="-1" role="dialog" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content style">
                                                  <div class="modal-header">
                              <h4 class="modal-title text-info" id="myModalLabel2" style="text-align:center;">Update</h4>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
                                </div>
                                        <div class="modal-body">
                                             <form method="post" action="deliver_challan_update">
                                                    {% csrf_token %}

                                                  <label class="btn btn-round btn-danger">
                                                 <input type="radio" name="paymenttype" id="cash"  value="CASH" class="join-btn" /> CASH
                                                </label>
                                                   <label class="btn btn-round btn-primary">
                                                 <input type="radio" name="paymenttype" id="upi" value="UPI" class="join-btn" /> UPI
                                                </label>
                                                   <label class="btn btn-round btn-success">
                                                 <input type="radio" name="paymenttype" id="scanner" value="scanner" class="join-btn" /> Scanner
                                                </label>
                                            <input type="hidden" id="txtHdnId" name="txtHdnId"  />
                                                 <input type="hidden" id="mrp" name="mrp"  />
                                            <div class="col-md-6 col-sm-6  form-group has-feedback">
                                                        <label>Quantity (In CaseS)</label>
										            <input type="text" class="form-control" placeholder="quantity" name="qty" id="qty">
                                            </div>
                                                   <div class="col-md-6 col-sm-6  form-group has-feedback">
                                                         <label>Number Of Botteles</label>
										            <input type="text" class="form-control" placeholder="Number Of Botteles" name="nob" id="nob">
                                            </div>
                                            <div class="col-md-12 col-sm-12  form-group has-feedback">
                                                <label>Total Price</label>
										        <input type="text" class="form-control" placeholder="Price" name="price" id="price" >
										    </div>
                                                <input type="hidden" name="cases" id="cases" />
                                            <div class="col-md-6 col-sm-6  offset-md-4">
                                                  <button type="submit" class="btn btn-info">Update Payment</button>
                                            </div>
                                             </form>
                                        </div>


                                        </div>
                                    </div>
                                </div>
<script>
function VerifyClick(id,id1,id2,id3,id4){
$("#qty").val(id1);
$("#nob").val(" ");
$("#price").val(id2);
$("#txtHdnId").val(id);
$("#cases").val(id3)
$("#mrp").val(id4)
}
        $('#qty').on('input', function()  {
            $("#nob").val(" ");
            $("#price").val(" ");
    	    val  = $("#qty").val();
            val1 = $("#cases").val();
            mrp = $("#mrp").val( );
            val2 =    (val * val1)
            val3 = (val2 * mrp)
            $("#nob").val(val2);
            $("#price").val(" ");
            $("#price").val(val3);
         });
</script>
{% endblock %}

